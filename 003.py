# -*- coding: utf-8 -*-
"""003_Streamlit_OpenAI_API_Search_CPU.ipynbì˜ ì‚¬ë³¸

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1GWtz9rxWIez3YcIQG-mr3qiP3emPkLLn

# Tavily Search with Streamlit

# I. Packages Installation

* streamlit
* pyngrok
"""

!pip install -q streamlit pyngrok

"""* Package Version Check"""

!pip list | grep -e streamlit -e pyngrok

"""# II. API Key"""

import os
from google.colab import userdata

# OpenAI API í‚¤ ì„¤ì •
os.environ["OPENAI_API_KEY"] = userdata.get("OPENAI_API_KEY")

# Tavily API í‚¤ ì„¤ì •
os.environ["TAVILY_API_KEY"] = userdata.get("TAVILY_API_KEY")

"""# III. Streamlit Tavily Search Code

> ### 1) Package ì„¤ì¹˜
"""

!pip install -q langchain-openai langchain_community langgraph

"""> ### 2) app.py ì‘ì„±"""

# Commented out IPython magic to ensure Python compatibility.
# # GPT ìˆ˜ì •
# 
# %%writefile app.py
# 
# import streamlit as st
# import os
# 
# from langchain_openai import ChatOpenAI
# from langchain_community.tools.tavily_search import TavilySearchResults
# from langchain_core.messages import HumanMessage
# 
# # í™˜ê²½ ë³€ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸°
# OPENAI_API_KEY = os.getenv("OPENAI_API_KEY")
# TAVILY_API_KEY = os.getenv("TAVILY_API_KEY")
# 
# # í™˜ê²½ ë³€ìˆ˜ ì²´í¬
# if not OPENAI_API_KEY:
#     st.error("âŒ OpenAI API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.")
#     st.stop()
# 
# if not TAVILY_API_KEY:
#     st.error("âŒ Tavily API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.")
#     st.stop()
# 
# # ëª¨ë¸ ë° Tavily íˆ´ ì´ˆê¸°í™”
# llm = ChatOpenAI(
#     api_key=OPENAI_API_KEY,
#     model="gpt-4o-mini",
#     temperature=0.2
# )
# 
# search_tool = TavilySearchResults(
#     tavily_api_key=TAVILY_API_KEY,
#     max_results=3
# )
# 
# # Streamlit UI
# st.set_page_config(page_title="KOSPI íˆ¬ì ë³´ê³ ì„œ", layout="centered")
# st.title("ğŸ“ˆ KOSPI ì¢…ëª© íˆ¬ì ë³´ê³ ì„œ ìƒì„±ê¸°")
# st.markdown("ìµœê·¼ ë‰´ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ ì¢…ëª© ë¶„ì„ê³¼ í•µì‹¬ í‚¤ì›Œë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.")
# 
# stock_name = st.text_input("KOSPI ì¢…ëª©ëª…ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì‚¼ì„±ì „ì)")
# 
# if st.button("íˆ¬ì ë³´ê³ ì„œ ìƒì„±") and stock_name.strip():
#     with st.spinner("ğŸ” ë‰´ìŠ¤ ê²€ìƒ‰ ì¤‘..."):
#         results = search_tool.run(stock_name.strip() + " ìµœê·¼ ë‰´ìŠ¤")
# 
#     if not results:
#         st.warning("â— ê´€ë ¨ ë‰´ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
#     else:
#         combined_content = "\n\n".join(
#             [doc["content"] for doc in results if "content" in doc]
#         )
# 
#         # 1ï¸âƒ£ í‚¤ì›Œë“œ ì¶”ì¶œ
#         st.subheader("ğŸ“Œ ë‰´ìŠ¤ ê¸°ë°˜ ì£¼ìš” í‚¤ì›Œë“œ")
# 
#         keyword_prompt = f"""
#         ë‹¤ìŒì€ {stock_name}ì— ëŒ€í•œ ìµœê·¼ ë‰´ìŠ¤ì…ë‹ˆë‹¤.
#         ì´ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ í•µì‹¬ í‚¤ì›Œë“œ 5ê°œë¥¼ í•œê¸€ë¡œ ì¶”ì¶œí•´ì£¼ì„¸ìš”.
#         ë‹¨ì–´ ìœ„ì£¼ë¡œ ê°„ê²°í•˜ê²Œ ì œì‹œí•´ì£¼ì„¸ìš”.
# 
#         ë‰´ìŠ¤ ë‚´ìš©:
#         {combined_content}
#         """
# 
#         keyword_result = llm.invoke(keyword_prompt)
#         st.markdown(f"**{keyword_result.content.strip()}**")
# 
#         st.divider()
# 
#         # 2ï¸âƒ£ íˆ¬ì ë³´ê³ ì„œ ìƒì„±
#         st.subheader("ğŸ“ íˆ¬ì ë³´ê³ ì„œ")
# 
#         report_prompt = f"""
#         ë‹¤ìŒì€ í•œêµ­ ì£¼ì‹ **{stock_name}**ì— ëŒ€í•œ íˆ¬ì ë³´ê³ ì„œ ì‘ì„±ì…ë‹ˆë‹¤.
# 
#         ì•„ë˜ ë‰´ìŠ¤ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ë‹¤ìŒ í•­ëª©ì„ í¬í•¨í•´
#         í•œêµ­ì–´ íˆ¬ì ë³´ê³ ì„œë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”:
# 
#         1. í•µì‹¬ ë‰´ìŠ¤ ìš”ì•½
#         2. ì¢…í•© ë¶„ì„
#         3. íˆ¬ììì—ê²Œ ì£¼ëŠ” ì‹œì‚¬ì 
# 
#         ë‰´ìŠ¤ ë‚´ìš©:
#         {combined_content}
#         """
# 
#         report_result = llm.invoke(report_prompt)
#         st.markdown(report_result.content.strip())
# 
#         st.success("âœ… ë³´ê³ ì„œ ìƒì„± ì™„ë£Œ")
#

"""> ### 2) Streamlit ì‹¤í–‰

* Streamlit app.py ì‹¤í–‰ í›„ ngrok ë§í¬ë¡œ ê²°ê³¼ í™•ì¸
"""

!streamlit run app.py &> /dev/null &

"""# IV. Start ngrok

> ### 1) ngrok Authentication Token

![image.png](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlUAAAChCAYAAADumkqUAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAC0pSURBVHhe7d0NXBR1wgfwny+AL4hioWZiVGuW9HhFR8+JcidKSfmcGL0Q3mVyRVqaXKSmkVgaqWl2mJaKhVmncRWJnZcWhnciXXlx6YVKrR6K+RIquoK6gPrMf2Z22V12l12YRWB/38/nnzOzs8MuTLO//b9Nu8sSEBEREVGTtFf/JSIiIqImYKgiIiIi0gBDFREREZEGGKqIiIiINMBQRURERKQBhioiIiIiDTBUEREREWmAoYqIiIhIA5z802OMMJQbpP8CfgFBCPBTtloxGlBukPdAQFCA9F8iIiJqrdpuqDpajM1FZdJCMO4YHYogZavrqvQo3KaHQV11zt7PyEdySCJypaXY1aXIiFa2WslLRsjj8h7IKs1AlLKViIiIWqG2G6qaGlhKMxE9PB16ddU5ez+jLlQhIAhBXeWN1qrKUS6nNoYqIiKi1o6hyhFzqApC7IvzcI/Tqi7nNVUNY6giIiJq7dhRvUHdcevwGMSMdlacNy+K5r/SUjtlday6BxEREbV2DFUN0iN9eAhCQpyUlHx1X/tyU8IRPsROSXGtHouIiIhaPoYqF/gFBSHoGiclsIFxe4ZylB+1U1zrBU9EREStgBf0qQpGREKE9F9nghGTMgVRlm145j5VOqRuy0NSiLqdiIiIyA4vCFWusBOc3OqoHgDd8Ajo5BF+ZcgcFYn0EvkB9wxMxfYtSQ0EQCIiImqJXA9Vl2pRc+Q/qCn9GpfPnUa7Tv7wCQ6Dz3V3Au07qju1IOaJNU3K8O7DcVi2X4pQT+VgfaJldPFDQGAA/CzfhltTKliGMoYqIiIib9RwqJIevlCUjbOfpuKS4Zi6sU67zt3RdeQ0dB0+tWWGK7O6sKObtR15ExuILuX5WLZks/QsV9hpPrQjPyUEiTnSQlwWSpdwAgUiIqK2xHmoulSLsxtm4NyOTClcXVI32tGuHfxuiUH3Ce+jXcdO6saWxs1Q1VSH1yLxwTfwvboqGMvLYaiVFjoGICjIsnP7rXj6wyyM76euXinmIFk/JBr3FyJ/n4s964PvQMzgBhImea3ybcuweIv0deWaGEybGuV0OhKiRtuTjefeK5IWwjB+fjxCla1u4blK7nIaqs5+Mh3nCt6Sa6va+fmjy2+eRpehT6B9t164bKzE+W/Womrra+YarE6/TED3BCmASSHryqm75541Z81/Kj8p7ASIwXr2nu8C+flqWGp086EHGctQuGkz8neeQfCoezB2WCgC7DZ51n89ZSujETnftXfDmjgvtT0d4TM2qCv1jX11J1IjLc4lNndTI5S9n4i45ZZfV+uTzzWjkwmgaw0oen82Zi/JRbH4rih90Q0dMw3zXhiPsJ7KLgLPVXKXw1BVvb8Ap99+EJcvGNA+4Br0+EM2fPrfoT5a59KZI6hYNRa1R4ulo7VH+87dgfYd1Edd43tjJLo/+r661lTuzGRuQw4DaOLz1f91a6VwV9FAODv8LhLuW9Y8Iwz3ZyJuVDqKRE2ZSVA8srYuRJQUJGVOQpUrNVXfrpmEzJ3SAkOVd3I6OMQP4z8swdxwflBR07jyBU++3yochSoD8lOGITHHzvWsYxhSt+Qg6UZllecqucvhPFXG7z6WA5Vozus2dqESqKT8VXPwG1R9vgDGvZ/LzYPtu/dFt7glaNdJ+mS+fAmXzlXgUuUJ94r0HO34oZe9uaRcKfJ8U019vqqjHwLE/FbOSqAUQJtDbRHS7lMDVVAYYhOioBM1VOXZSJyYjXJ5J+cMZUXIL8h3WoqPqjuTd4rOqH/XgJWmuwZE4I5B6qJJ7RmUl5dLpZE1w+SVgn+fg507dyrlkynSV0B5K5LWq9ukMi9S3miXceMMNVCFYtrfSpTztCQP0wZLm6RrZfqruTwfqdHs1lSJpr2KN+9BjfRB2vHaX6Dn5C1SaOqGc/9YLndYx8UauYlPNAV2u+81+Tmn14xDzX8L5WWXXLqIS+fPyEHMd8BwBD65SX3AizipGdKSceMkDJy6WcqLsVixMwMxombqaDbGDXkOhRY1CGz+I22VIXNMJNJ3S4ujMlAiBSzxtaP+ucR7X1LjGDcmStc25Y4WUUtLkDXG4outRc1pgPSl10/tu3rHunCMflP6KjlmBUqXxsiPy5zVtLKmilxkt6bqcm21VC7Iy+27BMqB6lLVKZz/eo0SqAQpi1347mNcPCFdHKWA1SNxPYLmHnS59EzOR/uuFo3X3qirDmMT4hGfMFad48ozCrdLgUril/CoEqiEa8YiPlosGFG408WwJNw4BTmmb4mOygsR6s7ktWoN2Dw9TglUCEXqDCVQWfELRYx8/kegl7qJyHVlWLu87hZh+cszobfs3mDBIN/FogxG6XE/f7WF4JzRqkbKeM7UHOhX1/pQ76Qlcs5+858Y6XfporqisrvtsrTZyahAci4oClPmL8TC+Q1Px9B4ZdDLH2yALtjyh/hBd5Oyrte7NnGEbP8yxIWHI9xZSVgr/VTySrVG6LctRuKQwZj0oWhYDkDs6vXmPipWQsYiVT7/Gzcyi7yZdJ69OUmZD9AvGMHiy2LJYsRNzkV5vWAVgwz5C1+OPMJaNzJGqXHKm43ElYUoKy9H2VeZSHxBCWgBE9Zj51fS/lLJSVEaF4lcZTdUtfPphHa+StWJ6O90+cJZtPe/Gp2HPAZ08JG3i9qpTrc/gI69bpLD1emsBJSnXWe3nJh3C6r1/5CfVrlpjrztVEaUXPtFzUfXz7ryOqC76326Og0ci3i5VsGFMlqHljqxBnmKHrmTR2PwzQMRPWEZ8kWekr40pH5SgIxoU/UoUdMZywuROWEYol8tltejFm1C3tJ4Kb4Dhi3JCB8Sh/SNeotaKFP/VnWC54HTkDU7TFowoHD+OERKXwQjE9JRKCqqBk/BmhTxGFHj2A9Vfv7w6f9Lefni8RIY930uL3eJfAo9p3wO/5jZ6PF4DrqNfVUOV9UHdqD6x232O6GLUnUCl2uU5kTR+V3eJjqnO5v7ijTSCQFqK2txqXX9kV6vNvs5G6x5tBibN23Gt1U6RA2Lcq3caMS30nPYcd2b6KC7zqDMw3ZNBJKkD7rdX2Uh6XYGKtKSAfnzEpG+TRleEzYrDyvGSGFp+EIUrElSB+AUSRG/V/3mZgu6x3JQsjULqY9FIfSaIOiGxGKKOGdzpiGMpyw1gUenVLhcfV4qVWjn2wXdH/0z/G65G2c/fgbndqySw5gYMdiug4/GUyqQreJX1Y6Z0oVn9xrlG520FYvDR2OZtDli/k6sSwiy31HdrXsoWpOHNcv9tsgrGMpRJp1dwaa52uypNaL8cBl+PgcE9AlGcE92WiE3GfKRnlII3fSnET/QJgEZy5C/sQy3PhiBIPO1y9FAiLo5Df0CgmD3tK0yoPyctEeHAATxXCUXeHTyT1OAsheqLLeRh5UsRuSoZfIHXoz0bSzjvl7Qr4rDaLn6PAYZxSsQK1p77YUqUVNV1LgeUsFhMdK3QHWFvIPpg0wdLaVXb81kvouB+RzjiD9qGuOpchhsuvnaJ5r/AuzUXNXNaejoCyDnqSJ3OQ1VTb1NjblWyo4rF6qM0G/Ph96gfuhXqLcycOM2BOaJMMXtWDp+2eRbIXieEfnTw5H4oWl0S53QWXnYNFHtjOlkSgXz7RpcMXg8Fiaw67FXMoUqMbIv7lYYtmej8LBFqNq9GOFjlqFcilMZxVlKmCdymzs3rncU4C0mig4IQpC9c1EKbuWiKouhilzkPFQJ0sONvaHyFQ1VtQYUf7IKa4vkHrMIe+QJxA8SVcV1/zNazbpr938aU/Ww9E0nUO3kKDF/exHzMd27oYEqZpMyrJ0QhzfEReDeDOyc3dzTDhhQtHIGJi7arIyOkT704peswNzRwXXf4DhPFTWVg+ZiU6jSL4lE9FIRzv0wfn0J5g5RHidyTznyly7GZmf9Ng8XInu7ONdcCFUNYagiFzmcUd1MjPK742EEpZWgZ0oBusW9JndUF7Os93z6C/SadwhdR6TUC1RCx2sHy6HJXvEdGI0OAX3UPTVWVYT06MEYPX0ZstdnS2UZnrtXWl/pxnxMskLMlqcJiMNa6dt2UxnluVKkUmE5O0pzCUDYxBXYqVdnui7ZhIWWgcpVTuapyhit7kOknidW58T+TCTLgUowYu2Ly6C/Ev8rUBsQhKipYjoOJ+VR10fxiS/YVncCUMv2WZxSgdzTcKgykUKTT7/b0WXYJHS9eya6/HoKfK6PsBumTDr/KhE9kj6xXxLXy6HLE/Qrk5FZKi2ExGPhxk1YNytG7pxdPH8G1l6xEWkGnDHNILGrGO7GuxbDUIbvv/kW39op3/+s7kOkniemc+LMtjREj0qH6MXnN2aKPF+Q6OsXLV1PMvfUb5Ymak5lOzdDjHK2LfnFZ9Q9iFzjeqhqNcqQr/b9iX1hIeIHhyJiYgbmyZ0Qi7BZHYor5KaEIzzFpcrfpvsqG5mmH70/GxvUCTlbnfJcpE2ehEl2inwzZSJBPU9M50R3GPGzaHYOGY+sl6dh7rsLESG+6ZQb0aufzQguomZWtNL+NS1tY93nBZErGu5T1eqY+kzpMG1rHqaoMznnm0chZSE+J7F+B0d7beZVuUgMTUa+6P8h7o83SBleW5aVgLg33ehTZchH8rBE5Fp+IR+cirwcdV6VlqI8H8uWbJZ+g8GISbGe5d3cOd8VogP/YFe6/FOb42C0aMDNERhgLIPfTaEIMJ3z0npxaXeE2g6LJ9LCHnUQksNBROUo3vStdL1zQYAOUZE697tLkNdpg6GqHNkJ4XjuK+l/pRd3ImeC9OFeW4zFw0dj2WHRdp6HWxdFy6EqZslOzMNshKdsth+q9i9D9MjFclOduFnn3KOjrTtruxKqTuUjLS4Ra0VzZIC0z8YRWDtcBDXJ7VOQ8/Y0hHn5LRCJiIjagjbY/BeEsROVCS6LXgzH4CHhCA9VAhUCxuPR4XXfNcSEb0FOJio0Fn9r7vtUWFRsvlVLzKAGvq8YDTCU5CMzZTQGhqmBStxU9hMpdIXEImP9eCW8/XsZ4sLCETdvLQpLlEnoiIiIqHVqg6FKCkvDFyJnvjLnlHx3cpFWgmKQsWUuwlxubjNgQ07dHdCN6zfgx2FT5FElqbENDKw9mo24UYlIzylWgtKN8Vjx1SbzTWUDhsxF3rYViJfXy1H0dhrGjZqEDbytCxERUavVJkOVoEvIws6S3cpw/6ISlO5cgVh3ZvfevQrLtomFCETcLv1jXIv0t10csxcyHqkJwdANScLCjTtRsnUhYmx+tl9IDBZuLcHOjQuRNESH4MemIJ6zjxMREbVabbBPlQWjAeUGFxvVLO/tZNGxPGBCDgqGvYvwx3NhRBDiV25FUmkcot2e/JOIiIjasjZbUyXbPhvh8uSdLpSEtcookKO5SDSN1AuIRUZKGAKi52FFnDz+G9lL1kLv0v2miIiIyJu07Zoq85Bax87s2oDNe4xWo//0K0cjepEfUrfkmPtBoVaP7MfTYZidhZg8Z7epqbu3oNs4bJeIiKjVatuhygX270JugOFUAAIcTHXg/N5/7tzo0wbvL0VERNRqMVTZDVXOOQ9VLtzo05FrYjBtqjJqkYiIiFoXhqrGhKr3ExG3/Hvg3gzsHJLNjupERETEUFW+bRkWi3sFNraWqMFbIRAREZE38PpQRURERKSFtj2lAhEREVEzYagiIiIi0kCbav6bPnOGukRERETkGYsWvKouWWOfKiIiIiINsPmPiIiISAMMVUREREQaYKgiIiIi0gBDFREREZEGGKqIiIiINMBQRURERKQBhioiIiIiDTBUEREREWmAoYqIiIhIA5xR3cZXJVX4cnclduqr8OMRI46frsGFGm1+RZ182qF3Dx8M6OuHcF1XjBjsjyEDu6qPEhERUWvGUKV6Y1M5sraewg9HLqhbmsdNfTshcWRPPD06SN2irR9//FFdItLGgAED1KU6PM9Ia/bOM6KWzutDVXZBBeZmH8PB8mp1y5VxXZAv0uL7IH5YoLpFG+LDjhcn0oqj84nnGWmJ5xO1Vl7dp2pq5mE8tuzQFQ9UgngN4rWI10REREStj1fWVF2ouYSHF5cib9dZdUvLEv2LbvhgWgg6+TQ98/IbH2mJNVXUHHg+NVF1BfYUfYmvCw+hQt3UkMCQ23D7r4bitr6+6hZqDK8MVWPnH/B4oLqqW0c8NKwHRg7uhsHXdUbvHh3l7cdP12L3wfPYuvss/lJwGifP1srbbYlgtWHWDepa4/HiRFpiqKLmwPOpCS4ewrqpScjar667xR8j0t7FrAh/db2FOl+JUxdq1BVbPvAP8IdvB3W1mXldqBLNa+9sPamuecaLD1+DZ8YEoUP7duoW+y5euozXN5bjxQ+Oqlus/WHkVVia1E9daxxenEhLDFXUHHg+NUHhAtw1N19daYTQych+bQx6qqst0aF1SXhs7SF1zVZ/JGZmYlywutrMvCpUiU7pot+Sp9zcrxMyn+qP22/orG5xzb8PnEfSm4ew73D9kYdvT+nfpM7rvDiRlhiqqDk01/lUXanHns8LkLtjB/aUHcMpQ13/Wt+AQPQJHoRhQ8cg8u5B0Pm3jmaxusDhXrgoWDAKL22TFkIm4O0VCdKzrzzza9LIiLQtmBWhrniIV3VUF6P8PEUEqo3P3+B2oBLEc8RzxTFsefI1ExF5o+qyfCyZ9FuMfmAypq9aj4LiQ1aBSqg2VOBQ8Q6sW/UcnnxA2nfS6/iy7MoPaqKWzWlNlbHaiKw1a7Dx009RU+Oo/RIY/D+D8dKcOfD3b7ntsGIeqlnvHVHXtLf9lZsaFagsiRqryOd/UNfqzH+kb6PnsWINAmmJNVXUHDx2PlUfw2cL/oglhdbdt30D+kP3i0G4zvISfv4ginftxyGbsNUz4hlkzIxBnxZQcXXqn2uwRn4vgRiWOAF3Bratmir9X1/Hnz8rQMH+SmnNH7qIYRjgRsw4u9/6uff87hmMuVF5zFOchqoNubl4c8VbcKWFsKUHq7CUEo9N7Cn6UE0b20tda5rFG36u18dKTBBatGSguuaelv5hl58SgsTiVGzfkoTGN4HnIzkkEcWztiNv4hVqSPcSDFXUHDxyPh3fjJf++DoKTHmqQyAG/d8ETHxwBAZdrSQkUTtVeVE81hU9A9RtJ/Zi64crseave3FKPCYEDkXKn9JwT291/QqxF6DaUqgSGvt+hKY8t7GcNv/t2btXDlQ9evTAyBEjcPddd9crNw9UPux3/2c3nk5OxqLXXmuwvLVyBf75z3/KNWHNQdx6xlOBSozyE53SG+vM2Sp1SSGOJY5pSbx28R6IiKgRSj/Gk0l1gapn2AQsev8DZDwZIwUq4Ni21/HYfaMw+qGHEZ8glYd+i7vuS8KSbceAq2/BPU/+CdnvL0RimNq/tWIHliRNxkelyiqRiUt9qvpd2w9Tn56K6c8+W68sXrQId0VHy/sd/ukwPv/i8wZLziefYPaLc/B86guorBRVc54l7uXnKWLahIZG+Tny7+/1uGnYH7Bl27fqFukLknQscUxbnnwPRERtVuUOzJ+xCnq5Fc8ftz2xHO+9koDb5HxUie+WJeGRBZtx6LxYt3D+ED5b8CgeW/adtJck8DaMe2Ut3nriNukokmo9Vs5YgAJempufGOEYM0oq0u9f3WR32xXQ5I7qfr5+SJ461Rys3LFn7x7s3bdPXfMccXNkTxHzUDXGd8X7cXfCLJw6fRbrPvlS3aqwd0zt30MZMkeFICQlH2UroxESIi3LJRqZtt++SjMRbX48BNEr883PleUlS9uTkWlxnOQ85SHlsbrnhozKlH6yM6Ipz+YYjWH+ucnSEU3qjq0Uy/eqPmZ6T2bK9uiVzl81EbVEFdg4Zy6+NChruvGvY1GcDqbuUNWFy/DSX5XBQKKv1FsffYovNm/Bpo+WIyVCqZU69td5eKPQ1K/KF7q4hcgYr1NWDfl4ac5GnFLWiLQZ/SeC1Yxp0+WT0ZXyRsZSdO3aFbW1tTAaPd8E+OMRz/0MMbGnu77fV4pR457HaUMV7h1xJ95+LUV9RGHvmB57DzmJSEQWSktLpbIdqQP1SB9uEUREOBmeDszabt4nXnpOeon6uFku0nPisV3epxQZUsaWw9rjuYhdrWyTj490RFoFHUtK3yjpGchSj9Eo4jVLPxdx4n1lIEpsk4OhdGx5m/J6ts+C9F5NwSoKY+Okf3I2WL+2vA3S69EhfhT7ajWeRZi1DNUWgdsqtDrYbhn+6wK3+uVA3m55XjnaztfS0l6LJ1VvXYI3ipVl/+FpWDTOsqfQIXy0Nl+uhfKPTMPbaTHmaRN8/XW4J2015kSKOqlKfLn2Y2nvOv3HLcSc4Wr/4eLleG0rRwWSwiumVDh+2vHIxaYyzZTuKhGoRsY/J9dQiUD1ceZsdOxoPfWrvWN67D0MTEWWuXN3MJKmx0r/FkMvBw3pordICie2+6xMlWJGfbHTLTub52PxfD10UhirC0em50oBzPICLbMMVGoQagxxsTcFqiV1R8lfmg69OLbFtuCJWUqInKh8iETdK957LjZY1JDl/028/3jEePba36blp4i/q6okHYvl36/09xZ/J5V+/mL1w9bBdikUJ0rnk0nuIuVvVrbSMuDXnVeOtvO1tNTX4gl6/HntN8piQBRmJQ9Vmu1Mzu9BsXydC0TMgzaPyfwx7MFRyiSYpdK+Vs2D0mPJz2FEgLL2zdp10k8j8pJQdaHGc/Ob2van2vldCX5z/zScOKXWN1so2V/WYKAS7PXR8th7CNU5GXWnx/fSRU8XF2O9T4gOoepiHR1utUxapXopmkmHv9Hm6CExiB8oHbnE8hL0PRaPEhd1HVK3NSFQlSxGtLjYSyFwu0V4Eh8CG3Kkf+LG2hw7GDFx0osu+V65IEZPk0KWdNn/m/LRYXpevfdPRC1faQG+PK4s+v86BnfaNgCcqIDS8NcN3Rw1OHTupoatY6g4IS/U6Xwn7vm1GsWO52O7bbcJ8kpeEao6+TSuI7krxK1mLC19JxeF/9ojhyfLYLVPX4aoB2fIgSp21BCHgUqwPabgyfdQnxSmRMpQg1F9UoBqaIYHvRpUXFGSi1z5G2tdrVFj6HNylZ8pfdNOVL8NW8lJNDdNmEqkxTdrc8gyNQGy6U8TUUuyIOoAZXFZas1lFDJWm7cidrUpTDvYHpKErFmm1C6F75VKrahS26hstaxRdbSdr6WFvhZPCInFg+q3v8rPMvGR7SWhb3912oBTOFYuL9RXfkztLxWM/n3lhTplH2PlZ2ov9dD7EcvabJJ4Rajq3cNHXdKeuEGyJdE/atTwO7Dnh4NyjdXxE6exv/QIRjw0A+Unz8g1VB+8+bzDQCXYHlPw5HtwyG6NlKDUYDmlu1W6rLpIutDKfbHEhdpRIHKBaGoUfaWy4qRXOD+xXod70+P1i+nDQrp0joqXXrfSBMimP61IH8Km37VlDWJ0hvlvUNdELHGwPXhinro9D0nmv0kwkraox7aa68zRdr6WlvZaPCcQYybejz5i8aIeKxesxyHTPFNCh3BE/kosVOKzVWvU0YEWqvXIWrVZGfn3q0jcaXnJFjctXrAKevl4ffDAxJZ9rzxqPl4Rqgb09VOXtLf7oPU4XF+fjshZPQd3/ToMPxw4jKgHp2P4A9PlQNVQDZWJ7TEFT74Hx5QaKX3OZuvaI4c1WBbUQFbXlKYq3Yxs0aQ40E7kki7USiAy9d1oHOVbtx7pS01HUTqh13sfEjH5qFXHXLV5MvdvyXLTn3U/MSJqVW56AnMekGMVsH8NkhftqJvAE74YMWECdOJyXLoeTz76HLK27cWximPYs20Npj86GetE5uugQ+KEKPOIQVysQMGiZ5C1X1n1/79nMPEmZZnIK0JVuK6ruqS9rbvPqkt1lGCVhqHhofjxwE84Vl7hUg2Vib1jevI9OCZ9kxQd161qj8qQOVF0+nYQjMyiME00BeQkWo8Ckp8bi1S1CcBW1FSlI3tivakN3FH/Z8vHld5HpOVx85KRWC84qe85J1d6FbEYa/ntnIhaHV3iPCSqtyap3DYXjz3/cV2tVEgCFqVGoae4LFd8h3UL/ohHEh5F8oL1+E5MFNohECNSF2KcqdatWo+Pnn8cL21Tm/1unICMJ29TlokkXhGqRgyuP65DK38pOG2/D5SfL/723stysHLWKd2WOJY4pi1PvgenRDX/tlRgfqTaDykS2XGu9YWQmwJWxyL3cVMfpkikh1pMc2CPqV+GFIishnC7ydRfI/dxdcoE6bh5pVmItexX9XgxUrfZNGsI0WOV/iX1OrYTUavToT/GLfwTHjAFq12r5FqpdbuU6dX9I2bivcw0JEbqoM6oIOZUgC5yAuZkrsWsCOXae2rXern2auUuU6C6HxkLE9C/4cs6eRGn9/57ZcEC5G/Lx62htyL95ZfRpbP7czLZs6+kBDOfn4WqqirMmZ2GYUOHqo94zpW6919l1Xk5YLkSqITWce+/fHn6A6y2E0jaAjGn1fB0hLbV99cEvPcfNQePnE8XD2Hj7Bl4o8h08z8pOwUPxe9+9yBG/O8t6GPv4+38Mez5Oh8f/nkdCsrqOl31DJuMRfPGXPFAZffedmJm8blNqOkPnYzs11pOHzHn7zEKczbPxDCxo51tLe7ef21J4kjPnSIiBP37QP1+UIJ/184uBypxDNtAJXjytTunTtpn2edIosxp03abxsq2ZEM/MBXTGKiI2o4O/THmlbV4b2YM+qs1UtVlO5AlmvzuG4W77nsY8b+3KPI20RS4pi5Q+fbHPTPfxXuvXPlA5dD/jjM3d7rPHyPuH9HyO93/cgqy138glSm4U91kd9sV4DWh6unRQbguyNzVUHNJbx7CkVONn6BTPFccw5Z4zeK1XxlidE4WYkVfJFOTmVQSi8VoPSdNeFqxmLXZWWlKM6El02zQkfNDkWU1SomI2gZf9Bn+DN7+6F3MGT8U/S1rp85X4NQJi2L5Pblzfwwbn4b3PspEyvA+dZ3WWyLR3Pn6B8h48QmMuzsG97hYxj0xE4veWW9u7mzRfP3RMzBQKv51fwt7264Ar2n+E7ILKvDYsvrBRSs39+uEzKf64/Yb3Ps9iRoqEaj2Ha7fPPn2lP6IH6beGb0R2CxDWmLzHzWH5jyfqo/vxXc7vkZB6SEc3LsHx0SY6twHg265Dv1DhuJ/h96GQb1bZoy6Es1bze3YR5PxyGoxNKo/HnjtVTxoO1+YE8c+noHkj8TvR4eJ7yzHA248t7FcClU9evTAHWFh6NDBvVuyOHLmzGl8W1Qk3/uvOUOVMDXzMN7ZelJd8wzRx+qZMUF2Z0a3JDqlv76x3G6Tn/CHkVdhaVI/da1x+GFHWmKooubA88k13hCqsGs57ntuozJfWGP5j8EiKZw1xzhNp6FqQ24u3lzxFpzs0iQirC2cvwA3XH+9uqV5jJ1/AHm76k9boKWrunXEQ8N6YOTgbvINkk338xMTe4p5qMS0CWKU38mz9Sf6FKJ/0Q0bZt2grjUeL06kJYYqag48n1zU1E7pIRPw9ooEKZK1ZJUoWPQ4XtpaN8DALfK0GKubrVnTaagyVhuRtWYNNn76KWpqtL2hb2BgIJKffhoRQyLQrl1z3oJF3EfvEh5eXOrxYNVYIlB9MC0EnXya3uWNFyfSEkMVNQeeTy4SM7tPTTJPROq2VhGqFNWGClRazojvIt9OgfDXpueSS5yGqrauOZoC3aVFk58lXpxISwxV1Bx4PrmhugJ7ir7E14WH4HZdTuBQTEi8k7fY0ZBXhypBdF6fm30MB8ttb/zUvMQov7T4Pk3qlG4PL06kJYYqag48n6i18popFRwRIab4jVsw/5G+8iSbzU38TPGzxWvQOlARERFR8/H6mipbX5VU4cvdldipr8KPR4w4froGF2q0+RV18mmH3j185Jsji3v5iVvPDBno2Xv6iW98RFpyVFNFpCXWVFFrxFBFREREpAGvb/4jIiIi0gJDFREREZEGGKqIiIiINMBQRURERKQBhioiIiIiDTBUEREREWmAoYqIiIhIAwxVRERERBpgqCIiIiLSAEMVERERkQYYqoiIiIg0wFBFREREpAGGKiIiIiINMFQRERERaYChioiIiEgDDFVEREREGmCoIiIiItIAQxURERGRBhiqiIiIiDTAUEVERESkAYYqIiIiIg0wVBERERFpgKGKiIiISAMMVUREREQaYKgiIiIi0gBDFREREZEGGKqIiIiINMBQRURERKQBhioiIiIiDTBUEREREWmAoYqIiIhIAwxVRERERBpgqCIiIiLSAEMVERERkQYYqoiIiIg0wFDVipyvvoQjp2pQef6SvLxow8+Y9d4RnK66qO5x5Wz61oBJb5Xh3wfOq1uaThxLHFMcuzGa8nxP/H6b+n6IiKhlY6hqRb747ixuemoPln9WjovS5/zn3xmQ+/UZnDNeUvewb0/ZBXxUeBo/SYHMkVNna7FBOtbXP1SpW6wdO12Djd+ckY+zU38O1bWX1UcU3x88j/f/fgplJ6rVLfZdlp52wlCL46drcfFS3THEstgmHhP7COJY4pji2CZV0nv93euluGXKXrvl2ayf1D3tP99V7vx+XdWU10NERC0fQ5WbxId2+LQS7C717Afjwpzj8H94lxxkmurTnWcwYelBfCuFIUcOHK/GUyvLsGLLCXWLQoSnl/9yDAOf2otxS0rl40S98CPueHZfo2qlqi5cQoJ0HHEMEaJMxLLYJh4T+zhyWXro5zO1UqmRwlddKKu9eFmuxTtVWXdMV5lqpUQtkqkkv30Y+iNGnJSON/O9I1aPiX3Fc0zEax+Z9qPdkCfKF7vOqnsSEVFbxlDlJvGhLWp8bGtq2qp38k7i1U+OI3xAF2x/5Sb88OYgLJ8YjJNnLyLpzUNWwag5hd3YBf9afDP2LrtFLn9PH4Bre/qoj7pHVJh9999z+Htxpbns2FsJw/mLuFB9GV/tq7J6TOxrUckGP592uHNAV/wm1N+qBPp3wE8nq73mXCEi8nYMVV7k6czDdmtSRHlo0X9RKYUIS6Lv1sf/PI2+UljJfKo/br+hs7z8aFRPPP9Ab+w7fAFf7Gr9/YO6+rXHn58JMQc0UT5NvRHdu3RA967tkTPzeqvHxL7iOSY9unbA/Ef6YsWTwVblTimIBkjH6BvYuLBHREStC0NVC2XZ30grof071atNMZWwG7qgQ/t26p4KUVPz04kaBAf5Iiigo7pV0f9qX/nfn05a99MyBbcVm62bEW2Z+lCJJjtRxLIn3nNjiObHlz88Jjcznjp7EdPfPYIzbnZWF4G0uOwCevfwQb+rGaqIiLwBQ1ULJLoK7fvJKC+LYGOrUvrQFx3Ha9xsVpo06up6tSmmMvP+3uhsUfsidPZtj57dOsidxyuN1q/jkNoh/dqrGhcYRBNq5PM/yB3vRRHLzjrS2xL9nUS/J1M/J9HvSfR/agrxe99Veh4xc/X45J+nMT6qJ2bG9Ubh3kqMekkvd+K36Mbl1H8Onpf73d12fWdc3c06kIq/nylIEhFR28FQ5YBp+gLbct54Wf5gPXG2rpbFVCxHrjWFGMJ/4JgSqr754Vy9Y76+8Wfc9sw+/MtJx3MtiD5Bv/9NT+w/asRTK8pQ8tMFucbm3fxTeOWj4xjQ1w/Db+2m7q14I6mf3EQ2KeZqdYt9ov+TqY+WKGLZnT5R5dLvOrugQh5NJ0rOV6eddnB35vDJGqS88xNunrwHQ2f+gB+kQDs7/hr86bF+mPVAb7wu/fvf49UYmaaX9/mjFOYOljse5Sj6UC3dVI7qmst4IKIH2llXAMp/PxEkRcd8IiJqO9pdthxCRWZi1J0Y7eaOITd3xSfP3QD/zk3Lqp8VGTDuNeVn9+7REZ+l6XB9b1/za3pmTC+5X9Pjyw/h59O1yJurk/s6OSJGEs77yzFc1a0jutjURpkYay7JofB+KQRkPX2dulUJCGnrjuKtzSesmueCr/bFupQQuZ+VYPoZYtuYO7vL2+wRzWL3LTwgNytavm4RSqOl0HLt1T7m36Hp/c5+qA+ei+st7+cOMTpx5ZYT+K30ekbfEaBurU/U+v3fywfk5YTIQEwY0VP+XVkynLuIzC9OYv32Cnn9ry/cgD497P/OP5YC3hNvHsKvB/lj3bMhco2fYPn3e1IKnaK5Vfx9iYiobWBNlQMiNIhaGtsS0ssXPh3aIeb2gHqP3X1bADp0UA/QSKKGbJUUBMSH7cu/u0ZuInpn60mr2ir/Tu3lD3SfjjZVIA6IDtfi/ZgClcjRYkoCEWTEVASCn097XHuVL3r6W3/I+0o/Y8H4vvjP0pux7IlgOdxsmn0jdv3pZnOguhJEbZ6YmNNyqgPbIgKVK8Tv8l+LB8rl2dhe9QKVIDqci8dM+zkKVIX7qvDMO4fRVfobzY7vYw5UlsTfT4RJBioioraFNVVuSnzjILb8+yw2Pn8Dfqnrom7VhvhLLNpwXJ4XKvm3veR+Tr9fUop/7KnESwnXIFgKPWLiS1FzM/meILs1Pq5wVFvUFM1dUyXC5rgl/5We57hfkpi08+TZWqc1XaIJdcwrB+SaKHdZvlfxtxOv98mVZbgoBdW3JgUjbkgP+TGTpta8ERFRy8aaqhbkpeyjSP/wOG66thOm3BskD9sX/Xn6SWFqwcfHUbC3Ut2zeYkgdNeLegyaslcOP1oQndJ/k1o3YaZYdqejuqjl2Tp3gNVUB7ZF9O9qyFUBHfHQ0B71ah3jhwXKIx5FjZMIR7aPiyJq/wQxU7qYkuKRPylNtqun9K8XqIiIqO1jqGpB/ue6zlLphA+eDTE3DYnmxg3P3yA3vQ27xV/e1hKJmjPR4fyu26w7rtsSzaOimVT0XRo5uJt5SgexLLa52oQqwp0IeWLWeUdF1Ao15Hrp9ys6pNuOhsyQtun6+uEq/45YYGcOKlFE82fNxcty4BX94O64sQt2LLgJvw13XFNHRERtF5v/3OTJ5r+GWDYfudL8p1XTlieaC13hrLnM1Fzo69NO7utkr++SyaDgTnJxhzvvWYyI1B8zytMn2M71ZYnNf0REbRtrqtowR01brhRT05YlMVfVpn8pN1V2VDZ9a7C6L56nidnMhwzsioibHRfR8dyTE4t2l16DqKVyFqiIiKjtY02Vm8QEkEcravHrQV3R084oMU+ynCLgN4P8m632yFRrI+6B1xAx07pWr8eVmirTJKTONOY1eaJ2jjVVRERtG0NVKyX68hTsqcS56ssY8T/+Tpu/mkqcIWIUnSs3Bha1NVcHdNCk1kZ0XBdBzl7znah5OmG46FINVGNekyd+v87eDxERtX4MVUREREQaYJ8qIiIiIg0wVBERERFpgKGKiIiISAMMVUREREQaYKgiIiIi0gBDFREREZEGGKqIiIiINMBQRURERKQBhioiIiIiDTBUEREREWmAoYqIiIhIAwxVRERERE0G/D9TeGZVMt/nZAAAAABJRU5ErkJggg==)
"""

from google.colab import userdata

# ngrok.com ì¸ì¦ í† í° ì‚¬ìš©
NGROK_AUTH_TOKEN = userdata.get('ngrok_key')

# GPT ì¶”ì²œ ì•„ë˜ 1~3 ì „ë¶€ ì•ˆë ë•Œ ì´ê±°ë¶€í„° ì‹¤í–‰ í›„ ë‹¤ì‹œ 1~3 ì‹¤í–‰
!pkill -f ngrok

# 1) ì‹¤í–‰ ë˜ì–´ ìˆëŠ” ngrok í„°ë„ ì „ë¶€ ì¢…ë£Œ
from pyngrok import ngrok

# ì—´ë ¤ìˆëŠ” í„°ë„/í”„ë¡œì„¸ìŠ¤ ì •ë¦¬
ngrok.kill()

# (ê¶Œì¥) Streamlitë„ ê°™ì´ ì •ë¦¬ í›„ ì¬ì‹¤í–‰
!pkill -f streamlit
!streamlit run app.py --server.port 8501 --server.headless true --server.enableCORS false --server.enableXsrfProtection false &> /dev/null &

# GPT ì¶”ì²œ : 3) ngrok ë‹¤ì‹œ ì—´ê¸° (ìƒˆ URLë¡œ ìƒì„±)
from pyngrok import ngrok

public_url = ngrok.connect(8501, "http")
print("âœ… ì ‘ì† URL:", public_url)

"""> ### 2) NgrokTunnel Start"""

'''
from pyngrok import ngrok

# ì¸ì¦ í† í°ìœ¼ë¡œ ngrok êµ¬ì„±
ngrok.set_auth_token(NGROK_AUTH_TOKEN)

# Streamlit í¬íŠ¸
port = 8501

# ngrok í„°ë„ ì—´ê¸°
public_url = ngrok.connect(port)
print(f"Streamlit ì•±ì— ì ‘ì†í•˜ë ¤ë©´ ë‹¤ìŒ URLì„ í´ë¦­í•˜ì„¸ìš”: {public_url}")
'''

"""#
#
#
# End Of Document
#
#
#
"""